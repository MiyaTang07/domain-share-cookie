#!/usr/bin/env node
/**
 * step 1:è¯¢é—®æ˜¯å¦å°†æ–‡ä»¶è¾“å‡ºåˆ°å½“å‰ç›®å½•ï¼ˆy/nï¼‰
 * step 2:å°†chrome extensionè¾“å‡ºåˆ°å¯¹åº”æ–‡ä»¶å¤¹åœ°å€
*/
const { Command } = require('commander')
const { resolve } = require('path')
const fs = require('fs')
const chalk = require('chalk')
const program = new Command()

program
   .usage('[options]')
   .option('-w, --where <string>', 'url address where the extension placed')

program.parse(process.argv)

const options = program.opts()
if (options) {
   const { where } = options
   if (where) {
      fs.access(resolve(where), function(err) {
         if (err && err.code === 'ENOENT') {
           console.log(`${chalk.red('\nDirectory does not existğŸŒ²\n')}`)
           process.exit(1)
         }
         copyExtensionInfoLocalDir(where)
       })
   } else {
      copyExtensionInfoLocalDir()
   }
}

function copyExtensionInfoLocalDir(url) {
  console.log('å†™å…¥OK')
}

